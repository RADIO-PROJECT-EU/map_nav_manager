<?xml version="1.0"?>
<launch>
  <arg name="global_frame_id" default="map"/>
  <arg name="move_base_marker_name" default="goto_interactive_marker"/>
  <arg name="init_pose_marker_name" default="init_pose_interactive_marker"/>
  <arg name="init_pose_topic_name" default="initialpose"/>
	
  <node name="map_nav_manager" pkg="map_nav_manager" type="map_nav_manager_node.py">
	<rosparam file="$(find map_nav_manager)/config/map_nav_manager.yaml" command="load"/>    
  </node>

  <!-- interactive marker to send goto goals to move_base -->
  <node name="$(arg move_base_marker_name)" pkg="map_nav_manager" type="goto_interactive_marker.py">
	<param name="frame_id" value="$(arg global_frame_id)"/>
  </node>	
  
  <!-- marker proxy for the web -->
  <node name="$(arg move_base_marker_name)_proxy" pkg="interactive_marker_proxy" args="topic_ns:=$(arg move_base_marker_name) target_frame:=/$(arg global_frame_id)" type="proxy"/>

   <!-- interactive marker to send the initial pose to the amcl -->
  <node name="$(arg init_pose_marker_name)" pkg="map_nav_manager" type="init_pose_interactive_marker.py">
	<param name="frame_id" value="$(arg global_frame_id)"/>
	<param name="topic_name" value="$(arg init_pose_topic_name)"/>
  </node>	
  
  <!-- marker proxy for the web -->
  <node name="$(arg init_pose_marker_name)_proxy" pkg="interactive_marker_proxy" args="topic_ns:=$(arg init_pose_marker_name) target_frame:=/$(arg global_frame_id)" type="proxy"/>

</launch>
